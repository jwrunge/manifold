<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8" />
		<title>View Transitions for List Operations</title>
		<style>
			body {
				font-family: sans-serif;
				padding: 20px;
				background: #1a1a1a;
				color: #e0e0e0;
			}
			.controls {
				margin-bottom: 20px;
			}
			button {
				margin: 5px;
				padding: 10px 15px;
				background: #4caf50;
				color: white;
				border: none;
				border-radius: 4px;
				cursor: pointer;
			}
			button:hover {
				background: #45a049;
			}
			.remove {
				background: #f44336;
			}
			.remove:hover {
				background: #da190b;
			}
			ul {
				list-style: none;
				padding: 0;
			}
			li {
				background: #2a2a2a;
				margin: 5px 0;
				padding: 15px;
				border-radius: 4px;
				border-left: 4px solid #4caf50;
				transition: all 0.3s ease;
			}
			li:hover {
				background: #333;
				transform: translateX(5px);
			}
			h1 {
				color: #4caf50;
			}
			p {
				color: #ccc;
			}
		</style>
	</head>
	<body data-mf-register>
		<h1>View Transitions for List Operations</h1>
		<p>
			Watch how adding and removing items now uses smooth view
			transitions!
		</p>

		<div class="controls">
			<button :onclick="addItem()">Add Item</button>
			<button class="remove" :onclick="removeItem()">
				Remove Last Item
			</button>
			<button class="remove" :onclick="clearAll()">Clear All</button>
		</div>

		<h3>Dynamic List (${items.length} items):</h3>
		<ul>
			<li :each="items as item, index">
				${index + 1}. ${item.name} - ${item.description}
			</li>
		</ul>

		<div
			style="
				margin-top: 30px;
				padding: 20px;
				background: #2a2a2a;
				border-radius: 4px;
			"
		>
			<h3>Instructions:</h3>
			<ul style="color: #ccc; padding-left: 20px">
				<li
					style="
						list-style: disc;
						background: none;
						border: none;
						padding: 5px;
					"
				>
					Click "Add Item" to see items animate in with view
					transitions
				</li>
				<li
					style="
						list-style: disc;
						background: none;
						border: none;
						padding: 5px;
					"
				>
					Click "Remove Last Item" to see items animate out
				</li>
				<li
					style="
						list-style: disc;
						background: none;
						border: none;
						padding: 5px;
					"
				>
					The transitions should be smooth position interpolations,
					not fades
				</li>
			</ul>
		</div>

		<script type="module">
			import $ from "./src/main.js";

			let counter = 1;
			const itemTemplates = [
				{ name: "Task", description: "Complete the project" },
				{ name: "Meeting", description: "Team standup at 10 AM" },
				{ name: "Review", description: "Code review session" },
				{ name: "Deploy", description: "Push to production" },
				{ name: "Update", description: "Update documentation" },
				{ name: "Test", description: "Run integration tests" },
				{ name: "Fix", description: "Resolve reported bugs" },
				{ name: "Optimize", description: "Improve performance" },
			];

			const state = $.create()
				.add("items", [
					{
						name: "Welcome",
						description: "Initial item to get started",
					},
					{ name: "Example", description: "Sample task in the list" },
				])
				.add("addItem", () => {
					const template =
						itemTemplates[
							Math.floor(Math.random() * itemTemplates.length)
						];
					state.items.push({
						name: `${template.name} #${counter}`,
						description: template.description,
					});
					counter++;
				})
				.add("removeItem", () => {
					if (state.items.length > 0) {
						state.items.pop();
					}
				})
				.add("clearAll", () => {
					state.items.length = 0;
				})
				.build();
		</script>
	</body>
</html>
