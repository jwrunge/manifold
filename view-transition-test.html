<!DOCTYPE html>
<html>
	<head>
		<title>View Transition Name Optimization Test</title>
		<style>
			.container {
				display: flex;
				gap: 20px;
				padding: 20px;
			}
			.section {
				border: 1px solid #ccc;
				padding: 10px;
			}
			.element {
				margin: 5px;
				padding: 5px;
				border: 1px solid #999;
			}
		</style>
	</head>
	<body>
		<div class="container">
			<div class="section">
				<h3>Regular Elements (should NOT have view-transition-name)</h3>
				<div class="element" data-mf-register>Regular div 1</div>
				<div class="element" data-mf-register>Regular div 2</div>
				<p class="element" data-mf-register>Regular paragraph</p>
			</div>

			<div class="section">
				<h3>Template Elements (should HAVE view-transition-name)</h3>
				<div class="element" data-mf-register :if="true">
					Element with :if
				</div>
				<div class="element" data-mf-register :each="items">
					Element with :each
				</div>
				<div class="element" data-mf-register :await="promise">
					Element with :await
				</div>
				<div class="element" data-mf-register :elseif="condition">
					Element with :elseif
				</div>
				<div class="element" data-mf-register :else>
					Element with :else
				</div>
				<div class="element" data-mf-register :then>
					Element with :then
				</div>
				<div class="element" data-mf-register :catch>
					Element with :catch
				</div>
			</div>

			<div class="section">
				<h3>
					Custom view-transition-name (should preserve custom name)
				</h3>
				<div
					class="element"
					data-mf-register
					:if="true"
					style="view-transition-name: custom-name"
				>
					Element with custom name
				</div>
			</div>
		</div>

		<script type="module">
			import { registerStore } from "./dist/manifold.js";

			// Wait for view transitions to be enabled
			setTimeout(() => {
				console.log(
					"\n=== Regular Elements (should NOT have view-transition-name) ==="
				);
				document
					.querySelectorAll(".section:nth-child(1) .element")
					.forEach((el, i) => {
						console.log(
							`Regular element ${i + 1}:`,
							el.style.viewTransitionName || "(none)"
						);
					});

				console.log(
					"\n=== Template Elements (should HAVE view-transition-name) ==="
				);
				document
					.querySelectorAll(".section:nth-child(2) .element")
					.forEach((el, i) => {
						const attr =
							Array.from(el.attributes).find((a) =>
								a.name.startsWith(":")
							)?.name || "unknown";
						console.log(
							`Template element ${i + 1} (${attr}):`,
							el.style.viewTransitionName || "(none)"
						);
					});

				console.log(
					"\n=== Custom view-transition-name (should preserve custom name) ==="
				);
				document
					.querySelectorAll(".section:nth-child(3) .element")
					.forEach((el, i) => {
						console.log(
							`Custom element ${i + 1}:`,
							el.style.viewTransitionName || "(none)"
						);
					});
			}, 200); // Wait for view transitions to be enabled
		</script>
	</body>
</html>
